<!DOCTYPE html>
<html lang="en">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Общие сведения :: Платформа КУРС</title>
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">Платформа КУРС</a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Поиск">
        </div>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="../../index.html"><img src="../../_/img/course-orchestra-logo.svg" width="60rem"></a>
        <!--div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div-->
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="mellophone" data-version="2">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="general.html">Мелофон</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="general.html">Общие сведения</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="services.html">Сервлеты сервера аутентификации и протокол работы с ними</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="melloponeconfig.html">Настройка Mellophone</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="config.html">Общие настройки</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="sqlprovider.html">SQL-провайдер аутентификации</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="httpprovider.html">HTTP-провайдер аутентификации</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="xmlprovider.html">XML-файл-провайдер аутентификации</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ldapprovider.html">ldapprovider.adoc</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="api.html">Mellophone API</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Мелофон</span>
    <span class="version">2</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="general.html">Мелофон</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="general.html">2</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../doc/1/st2-ui-state-in-url.html">Платформа КУРС</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../doc/1/st2-ui-state-in-url.html">1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../celesta/7/1010_what_is_celesta.html">Челеста</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../celesta/7/1010_what_is_celesta.html">7</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../doc/1/general.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="general.html">Мелофон</a></li>
    <li><a href="general.html">Общие сведения</a></li>
  </ul>
</nav>
<!--  -->
<!--  -->
<!--  <div class="edit-this-page"><a href="file:///usr/src/app/target/doc/components/mellophone2/target/antora/modules/ROOT/pages/general.adoc">Редактировать страницу</a></div>-->
<!--  -->
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Содержание" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Общие сведения</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><strong>Mellophone</strong> — компонент платформы КУРС, специализированно решающий задачи аутентификации, кросс-доменной аутентификации, интеграции с различиными провайдерами аутентификации.</p>
</div>
<div class="paragraph">
<div class="title">Загрузить дистрибутив платформы Course Orchestra</div>
<p><a href="https://artifactory.corchestra.ru/artifactory/list/corchestra-dev/">Стабильные сборки</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_постановка_задачи">
<a class="anchor" href="#_%D0%BF%D0%BE%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%B7%D0%B0%D0%B4%D0%B0%D1%87%D0%B8"></a>Постановка задачи</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Предположим, что на разных доменах (к примеру, www.domain-1.ru и www.domain-2.ru) развёрнуты разные веб-приложения.</p>
</div>
<div class="paragraph">
<p>Тот факт, что эти приложения развёрнуты на разных доменах, означает, что наборы сохраняемых браузером куков каждого из приложений индивидуальны и <em>полностью</em> изолированы друг от друга. То есть запрос на показ веб-страницы для приложения не будет содержать никаких данных о том, что пользователь был и авторизовывался ранее в каких-либо других приложениях.</p>
</div>
<div class="paragraph">
<p>Задача состоит в том, чтобы организовать общую авторизацию между несколькими веб-приложениями, то есть построить систему, благодаря которой пользователь, выполнивший аутентификацию в любом веб-приложении, при входе во все другие приложения также оказывался бы аутентифицирован, а при потере аутентификации в любом из приложений также переставал бы быть аутентифицированным для всех остальных приложений. За реализацию этого механизма отвечает сервер аутентификации, который может находиться на домене, отличающемся от доменов любого из приложений (к примеру, находиться в домене www.authentication-domain.ru), к нему за информацией должны обращаться как пользователь из браузера, так и напрямую взаимодействующие приложения (см. схему далее по тексту).</p>
</div>
<div class="paragraph">
<p>Для работоспособности этой схемы пользовательские браузеры должны поддерживать т. н. «сторонние куки».</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_применяемые_термины">
<a class="anchor" href="#_%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D0%BD%D1%8F%D0%B5%D0%BC%D1%8B%D0%B5_%D1%82%D0%B5%D1%80%D0%BC%D0%B8%D0%BD%D1%8B"></a>Применяемые термины</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>В этом руководстве используется слово «<strong>аутентификация</strong>», означающее проверку «свой-чужой». Это слово следует отличать от слова «авторизация», означающее проверку, какими правами наделён «свой». Мы говорим только о системе аутентификации. Описываемая здесь система ничего не знает о ролях и правах аутентифицированного пользователя и не занимается ими.</p>
</li>
<li>
<p><strong>Провайдером аутентификации</strong> мы будем называть систему, которая по паре «логин/пароль» может выдать ответ «свой/чужой». Mellophone поддерживает работу со следующими типами провайдеров аутентификации:</p>
<div class="ulist">
<ul>
<li>
<p><a href="#LDAPlink">LDAP</a> в одном из двух вариантов:</p>
<div class="ulist">
<ul>
<li>
<p>Microsoft Active Directory ,</p>
</li>
<li>
<p>Apache DS (по протоколу LDAP),</p>
</li>
</ul>
</div>
</li>
<li>
<p>Текстовый файл в формате XML,</p>
</li>
<li>
<p><a href="#sql">База данных</a>,</p>
</li>
<li>
<p><a href="#httpserver">HTTP-сервер</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Общая для всех приложений сессия аутентификации имеет «<strong>идентификатор сессии аутентификации</strong>», отличный от «<strong>идентификатора сессии приложения</strong>». У каждого веб-приложения имеется свой (известный только самому этому приложению и серверу аутентификации) идентификатор сессии приложения. Он хранится в куки, выставляемой на домен приложения. Идентификатор сессии аутентификации известен только самому серверу аутентификации и хранится в стороннем куки, выставленном на домен сервера аутентификации. Одному идентификатору сессии аутентификации может соответствовать какое угодно количество идентификаторов сессий приложений. Одному идентификатору сессии приложения может соответствовать ноль, означающий, что идентификатор сессии приложения не аутентифицирован, или единица, означающая, что идентификатор сессии приложения аутентифицирован и является идентификатором активной сессии аутентификации. Таблицу соответствия между идентификаторами сессий приложения и идентификаторами активных сессий аутентификации хранит сервер аутентификации.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>В некоторых случаях (для обеспечения дополнительной информационной защиты) приложению может понадобиться сменить идентификатор сессии приложения. Для отражения этого факта в Mellophone имеется специальный сервлет /changeappsesid.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_компоненты_решения_задачи">
<a class="anchor" href="#_%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D1%8B_%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D1%8F_%D0%B7%D0%B0%D0%B4%D0%B0%D1%87%D0%B8"></a>Компоненты решения задачи</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Для решения задачи применяются следующие составляющие:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Сервер аутентификации (Mellophone), на котором экспонированы:</p>
<div class="ulist">
<ul>
<li>
<p>сервлеты, обслуживающие прямые запросы с серверов веб-приложений;</p>
</li>
<li>
<p>один сервлет, обслуживающий запросы от клиентских браузеров, поступающих в виде запросов на отображение фрейма или картинки на странице веб-приложения.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Протокол, по которому любое веб-приложение может взаимодействовать с сервером аутентификации для обеспечения общей аутентификации.
##</p>
</li>
</ul>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script src="../../_/js/vendor/lunr.js"></script>
<script src="../../_/js/vendor/lunr-languages.js"></script>
<script src="../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../.." data-snippet-length="100" data-stylesheet="../../_/css/search.css"></script>
<script async src="../../search-index.js"></script>
  </body>
</html>
