<!DOCTYPE html>
<html lang="en">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Системные таблицы Celesta :: Платформа КУРС</title>
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">Платформа КУРС</a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Поиск">
        </div>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="../../index.html"><img src="../../_/img/course-orchestra-logo.svg" width="60rem"></a>
        <!--div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div-->
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="celesta" data-version="7">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="1010_what_is_celesta.html">Челеста</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1010_what_is_celesta.html">Что такое Celesta?</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1012_demo.html">Демонстрационный пример</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1013_maven_plugin.html">Maven-плагин</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1015_vocabulary.html">Словарь основных понятий Celesta</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1020_celesta_start.html">Операции, выполняемые при инициализации Celesta</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1030_basic_settings.html">Параметры конфигурации Celesta</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="1040_system_tables.html">Системные таблицы Celesta</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1050_celesta_sql.html">Язык Celesta-SQL</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1060_celesta_doc.html">CelestaDoc</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1065_celesta_instantiation.html">Создание экземпляра Celesta</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1070_call_context.html">Контекст вызова</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1080_data_accessors.html">Работа с данными через классы доступа к данным (курсоры)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1088_security_logging.html">Распределение прав доступа и протоколирование изменений</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1090_blob.html">BLOB-поля</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1100_option.html">Options-поля</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1102_dynamic.html">Динамический доступ к данным</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1105_triggers.html">Триггеры</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1107_xrec.html">Объект xRec</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1110_lost_updates_protection.html">Защита от потерянных обновлений</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1120_meta.html">Метаданные Celesta</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1130_celesta_unit.html">CelestaUnit</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="2005_best_practices.html">Лучшие практики написания кода Celesta</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="2010_supported_rdbms.html">Особенности работы Celesta с поддерживаемыми типами СУБД</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="2020_dbschema.html">Проектирование базы данных Celesta в DBSchema</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Челеста</span>
    <span class="version">7</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../mellophone/2/general.html">Мелофон</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../mellophone/2/general.html">2</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../doc/1/st2-ui-state-in-url.html">Платформа КУРС</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../doc/1/st2-ui-state-in-url.html">1</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="1010_what_is_celesta.html">Челеста</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="1010_what_is_celesta.html">7</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../doc/1/general.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="1010_what_is_celesta.html">Челеста</a></li>
    <li><a href="1040_system_tables.html">Системные таблицы Celesta</a></li>
  </ul>
</nav>
<!--  -->
<!--  -->
<!--  <div class="edit-this-page"><a href="file:///usr/src/app/target/doc/components/celesta/target/antora/modules/ROOT/pages/1040_system_tables.adoc">Редактировать страницу</a></div>-->
<!--  -->
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Содержание" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Системные таблицы Celesta</h1>
<div class="sect1">
<h2 id="_структура_системной_схемы_celesta">
<a class="anchor" href="#_%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%82%D1%83%D1%80%D0%B0_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BD%D0%BE%D0%B9_%D1%81%D1%85%D0%B5%D0%BC%D1%8B_celesta"></a>1. Структура системной схемы <code>celesta</code>
</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Помимо таблиц и схем, определённых пользователем, система Celesta добавляет в базу данных таблицы в собственной системной схеме <code>celesta</code>, структура которой представлена на диаграмме ниже.</p>
</div>
<div class="paragraph">
<p>Структура (в том числе состав полей) таблиц, относящихся к системной грануле "celesta", не подлежит изменению, а для доступа к их данным используются встроенные классы из пакета <a href="https://courseorchestra.github.io/celesta/apidocs/index.html?ru/curs/celesta/syscursors/package-summary.html">ru.curs.celesta.syscursors</a>.
Тем не менее, изменение данных в части из этих таблиц является частью штатной настройки системы.</p>
</div>
<div class="paragraph">
<p>Системные таблицы предназначены для:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Координирования автоматической миграции (таблица <code>grains</code>).</p>
</li>
<li>
<p>Распределения прав доступа к таблицам и представлениям (<code>permissions</code>, <code>roles</code>, <code>userroles</code>).</p>
</li>
<li>
<p>Настройки системы логирования (<code>logsetup</code>) и хранения логов (<code>log</code>, <code>calllog</code>).</p>
</li>
</ul>
</div>
<div class="imageblock kroki">
<div class="content">
<img src="_images/diag-ce11273b623cc3d92aac147d74bfef9399d73074.png" alt="systemtables">
</div>
</div>
<div class="paragraph">
<p>Назначение таблиц:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">celesta.grains</dt>
<dd>
<p>перечень гранул со статусами.
Ведётся автоматически, ручные изменения разработчиком решений сводятся к выставлению статуса "recover" на грануле после неудавшейся попытки автообновления и к удалению записи об удалённой грануле.</p>
</dd>
<dt class="hdlist1">celesta.tables</dt>
<dd>
<p>перечень таблиц и представлений.
Содержимое данной таблицы автоматически синхронизируется с перечнем таблиц и представлений, доступных в гранулах Celesta, пользователю не следует вмешиваться в данные этой таблицы (в любом случае изменения будут потеряны при следующей синхронизации).
Поле tabletype указывает на то, является запись таблицей ("T") или представлением ("V").</p>
</dd>
<dt class="hdlist1">celesta.roles</dt>
<dd>
<p>перечень ролей celesta.
Сюда следует добавлять роли, в том числе здесь находятся роли с системными именами "reader", "editor" и т. д. (о ролях с системными именами см. в разделе <a href="#access_rights_granting">«Распределение прав доступа»</a>).</p>
</dd>
<dt class="hdlist1">celesta.userroles</dt>
<dd>
<p>связь идентификаторов пользователей (логинов) с ролями.
Заполняется администратором системы.</p>
</dd>
<dt class="hdlist1">celesta.permissions</dt>
<dd>
<p>разрешения ролям на таблицы.
Заполняется администратором.</p>
</dd>
<dt class="hdlist1">celesta.logsetup</dt>
<dd>
<p>настройки логирования.
Заполняется администратором.</p>
</dd>
<dt class="hdlist1">celesta.log</dt>
<dd>
<p>лог изменений.
Заполняется системой автоматически при каждом изменении данных, однако данные пишутся лишь по таблицам и действиям, указанным в <code>celesta.logsetup</code>.</p>
</dd>
<dt class="hdlist1">celesta.calllog</dt>
<dd>
<p>лог вызовов методов.
Заполняется в <a href="#profiling_mode">режиме профилирования</a>.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="celesta_grains_table">
<a class="anchor" href="#celesta_grains_table"></a>2. Таблица celesta.grains</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Данная таблица является важнейшей из системных таблиц Celesta, т. к. её содержимое управляет синхронизацией структуры базы данных с метаданными в момент запуска системы.
Таблица содержит следующие поля:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 66.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-middle">Имя поля</th>
<th class="tableblock halign-center valign-middle">Тип поля</th>
<th class="tableblock halign-center valign-middle">Значение поля</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VARCHAR(30)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">имя (код) гранулы</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VARCHAR(2000)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">version tag гранулы</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>length</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">длина CelestaSQL-скрипта гранулы в байтах</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>checksum</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VARCHAR(8)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CRC32 CelestaSQL-скрипта гранулы</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>state</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INT</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content">
<div class="paragraph">
<p>статус гранулы:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>0 – <strong>ready</strong> — гранула развёрнута и готова к использованию (при этом её version tag и контрольная сумма записаны в полях <code>version</code>, <code>length</code>, <code>checksum</code>).</p>
</li>
<li>
<p>1 – <strong>upgrading</strong> — гранула находится в процессе создания или апгрейда другим приложением Celesta, подключённым к базе данных.</p>
</li>
<li>
<p>2 – <strong>error</strong> — последняя попытка автообновления завершилась неудачно, в этом случае в поле <code>message</code> находится сообщение об ошибке</p>
</li>
<li>
<p>3 – <strong>recover</strong> (эквивалент — отсутствие записи в таблице <code>grains</code> при наличии гранулы в папке <code>score</code>) — гранула отсутствует или нуждается в регенерации (например, после ошибки апгрейда)</p>
</li>
<li>
<p>4 – <strong>lock</strong> — гранула не нуждается в автоматическом обновлении структуры ни при каких обстоятельствах</p>
</li>
</ul>
</div>
</div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lastmodified</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DATETIME</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">дата и время последнего обновления статуса гранулы</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>message</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TEXT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">комментарий (например, сообщение об ошибке при последнем неудавшемся автообновлении)</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="access_rights_granting">
<a class="anchor" href="#access_rights_granting"></a>3. Система распределения прав доступа</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Как видно из структуры таблиц, права на таблицы раздаются ролям, прямой раздачи прав пользователям не предусмотрено.</p>
</div>
<div class="paragraph">
<p>В поле <code>roleid</code> указывается идентификатор роли, в полях <code>grainid</code> и <code>tablename</code> — ссылка на таблицу.
В битовых полях r, i, m, d выставляются флаги, если необходимы права, соответственно, на чтение, вставку, модификацию и удаление.</p>
</div>
<div class="paragraph">
<p>Предусмотрены также специальные, системные имена ролей: <strong>reader</strong> и <strong>editor</strong>, а также роли вида <strong>&lt;имя гранулы&gt;.reader</strong> и <strong>&lt;имя гранулы&gt;.editor</strong>.</p>
</div>
<div class="paragraph">
<p>Роль <strong>reader</strong> даёт право на чтение всех без исключения таблиц, роль <strong>&lt;имя гранулы&gt;.reader</strong> (например, "foo.reader") даёт право на чтение всех таблиц в соответствующей грануле.</p>
</div>
<div class="paragraph">
<p>Роль <strong>editor</strong> даёт полные права (на чтение, вставку, модификацию и удаление) всех таблиц.
Роль <strong>&lt;имя гранулы&gt;.editor</strong> (например, "foo.editor") даёт полные права на все таблиц в соответствующей грануле.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_система_логирования">
<a class="anchor" href="#_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0_%D0%BB%D0%BE%D0%B3%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F"></a>4. Система логирования</h2>
<div class="sectionbody">
<div class="paragraph">
<p>При любом изменении данных, производимых через курсоры Celesta, работает не только система распределения прав доступа, но также и система логирования изменений данных, записывая все изменения в таблицу <strong>celesta.log</strong>.
Однако, чтобы <strong>celesta.log</strong> не засорялась потенциально огромным количеством ненужных данных, логируются лишь изменения на таблицах, явно указанных в таблице <strong>celesta.logsetup</strong>.
Более того, имеется возможность отдельно включать логирование вставки, модификации и удаления записи.</p>
</div>
<div class="paragraph">
<p>Для того, чтобы включить логирование изменений данных таблиц, производимых через систему Celesta, необходимо занести соответствующие настройки в таблицу <strong>celesta.logsetup</strong>.
При этом в полях grainid и tablename указывается ссылка на таблицу, а в битовых полях i, m, d выставляются флаги, если необходимо логирование, соответственно, вставки, модификации и удаления.</p>
</div>
<div class="paragraph">
<p>Таблица <code>celesta.log</code> состоит из следующих полей:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 66.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-middle">Имя поля</th>
<th class="tableblock halign-center valign-middle">Тип поля</th>
<th class="tableblock halign-center valign-middle">Значение поля</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>entryno</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">автоинкрементируемый целочисленный номер записи в таблице лога</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>entry_time</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DATETIME</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">время записи</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>userid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VARCHAR(250)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">идентификатор пользователя, от имени которого произведено изменение</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sessionid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VARCHAR(250)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">идентификатор пользовательской сессии, в рамках которой произведено изменение</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>grainid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VARCHAR(30)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">идентификатор гранулы</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tablename</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VARCHAR(30)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">имя таблицы</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>action_type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VARCHAR(1)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">тип действия (I для вставки, M для модификации, D для удаления)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkvalue1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VARCHAR(100)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">значение первого поля первичного ключа (сведённое к текстовому типу)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkvalue2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VARCHAR(100)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">значение второго поля первичного ключа (если есть, сведённое к текстовому типу)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkvalue3</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VARCHAR(100)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">значение третьего поля первичного ключа (если есть, сведённое к текстовому типу)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>oldvalues</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VARCHAR(2000)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">прежнее состояние записи (поля сведены к тексту и перечислены через запятую в формате CSV, информация обрезана по длине поля).
Значение поля заполняется для действий M и D</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>newvalues</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VARCHAR(2000)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">текущее состояние записи в том же формате, что и в поле <code>oldvalues</code>.
Заполняется для действий M и I</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="profiling_mode">
<a class="anchor" href="#profiling_mode"></a>5. Система профилирования</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Для поиска и устранения проблем, связанных с быстродействием, Celesta может работать в режиме профилирования, включаемом при помощи метода <code>setProfilemode(true)</code> экземпляра <a href="https://courseorchestra.github.io/celesta/apidocs/index.html?ru/curs/celesta/Celesta.html"><code>Celesta</code></a>.</p>
</div>
<div class="paragraph">
<p>В режиме профилирования информация обо всех вызовах процедур записывается в таблицу calllog, состоящую из следующих полей:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 66.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-middle">Имя поля</th>
<th class="tableblock halign-center valign-middle">Тип поля</th>
<th class="tableblock halign-center valign-middle">Значение поля</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>entryno</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">автоинкрементируемый целочисленный номер записи в таблице лога</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sessionid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VARCHAR(250)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">идентификатор пользовательской сессии, в которой была запущена процедура</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>userid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VARCHAR(250)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">идентификатор пользователя, от имени которого работала пользовательская сессия</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>procname</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VARCHAR(250)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">имя выполнявшейся процедуры</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>starttime</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DATETIME</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">время начала выполнения процедуры</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>duration</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">общее время выполнения процедуры (в миллисекундах)</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</article>
  </div>
</main>
</div>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script src="../../_/js/vendor/lunr.js"></script>
<script src="../../_/js/vendor/lunr-languages.js"></script>
<script src="../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../.." data-snippet-length="100" data-stylesheet="../../_/css/search.css"></script>
<script async src="../../search-index.js"></script>
  </body>
</html>
