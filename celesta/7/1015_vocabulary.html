<!DOCTYPE html>
<html lang="en">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Словарь основных понятий Celesta :: Платформа КУРС</title>
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">Платформа КУРС</a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Поиск">
        </div>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="../../index.html"><img src="../../_/img/course-orchestra-logo.svg" width="60rem"></a>
        <!--div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div-->
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="celesta" data-version="7">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="1010_what_is_celesta.html">Челеста</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1010_what_is_celesta.html">Что такое Celesta?</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1012_demo.html">Демонстрационный пример</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1013_maven_plugin.html">Maven-плагин</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="1015_vocabulary.html">Словарь основных понятий Celesta</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1020_celesta_start.html">Операции, выполняемые при инициализации Celesta</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1030_basic_settings.html">Параметры конфигурации Celesta</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1040_system_tables.html">Системные таблицы Celesta</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1050_celesta_sql.html">Язык Celesta-SQL</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1060_celesta_doc.html">CelestaDoc</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1065_celesta_instantiation.html">Создание экземпляра Celesta</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1070_call_context.html">Контекст вызова</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1080_data_accessors.html">Работа с данными через классы доступа к данным (курсоры)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1088_security_logging.html">Распределение прав доступа и протоколирование изменений</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1090_blob.html">BLOB-поля</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1100_option.html">Options-поля</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1102_dynamic.html">Динамический доступ к данным</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1105_triggers.html">Триггеры</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1107_xrec.html">Объект xRec</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1110_lost_updates_protection.html">Защита от потерянных обновлений</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1120_meta.html">Метаданные Celesta</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="1130_celesta_unit.html">CelestaUnit</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="2005_best_practices.html">Лучшие практики написания кода Celesta</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="2010_supported_rdbms.html">Особенности работы Celesta с поддерживаемыми типами СУБД</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="2020_dbschema.html">Проектирование базы данных Celesta в DBSchema</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Челеста</span>
    <span class="version">7</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../mellophone/2/general.html">Мелофон</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../mellophone/2/general.html">2</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../doc/1/st2-ui-state-in-url.html">Платформа КУРС</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../doc/1/st2-ui-state-in-url.html">1</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="1010_what_is_celesta.html">Челеста</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="1010_what_is_celesta.html">7</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../doc/1/general.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="1010_what_is_celesta.html">Челеста</a></li>
    <li><a href="1015_vocabulary.html">Словарь основных понятий Celesta</a></li>
  </ul>
</nav>
<!--  -->
<!--  -->
<!--  <div class="edit-this-page"><a href="file:///usr/src/app/target/doc/components/celesta/target/antora/modules/ROOT/pages/1015_vocabulary.adoc">Редактировать страницу</a></div>-->
<!--  -->
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Содержание" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Словарь основных понятий Celesta</h1>
<div class="dlist">
<dl>
<dt class="hdlist1">Партитура (Score)</dt>
<dd>
<p>совокупность схем базы данных, с которыми работает данный экземпляр Celesta, представленных в виде <a href="1050_celesta_sql.html#CelestaSQL">Язык Celesta-SQL</a> скриптов.</p>
</dd>
<dt class="hdlist1">
<a href="1050_celesta_sql.html#CelestaSQL">Язык Celesta-SQL</a> скрипт</dt>
<dd>
<p>текстовый файл, который содержит информацию о</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>схемах базы данных.
Внимание: по историческим причинам, синонимом понятию «схема» (schema) в Celesta также является слово «гранула» (grain).</p>
</li>
<li>
<p>таблицах, включая информацию о</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>полях и их типах (подмножество допустимых типов выбрано таким образом, чтобы обеспечить универсальную поддержку во всех поддерживаемых типах баз данных)</p>
</li>
<li>
<p>первичном ключе (primary key) таблицы – его наличие обязательно требуется для работы <a href="1080_data_accessors.html#data_accessors_section">классов доступа к данным</a>,</p>
</li>
<li>
<p><code>DEFAULT</code>-значениях на полях,</p>
</li>
<li>
<p>ограничениях <code>NOT NULL</code> на полях,</p>
</li>
</ol>
</div>
</li>
<li>
<p>индексах,</p>
</li>
<li>
<p>последовательностях (sequences),</p>
</li>
<li>
<p>связях между таблицами (foreign keys),</p>
</li>
<li>
<p>представлениях (views), включая материализованные представления (materialized views) и параметризованные (functions).</p>
</li>
</ol>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>В процессе работы <a href="1013_maven_plugin.html#maven_plugin_section">Celesta Maven Plugin</a> на основе данных скриптов кодогенерируются классы доступа к данным, а сами эти файлы  копируются в ресурсы компилируемых jar-файлов.</p>
</div>
<div class="paragraph">
<p>В процессе запуска Celesta происходит автоматическое обновление схем базы данных до вида, заданного в CelestaSQL-скриптах.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Версия схемы (Schema version tag)</dt>
<dd>
<p>идентификатор версии в виде перечисленных через запятую компонент, явно проставляемый разработчиком гранулы в команде <a href="1050_celesta_sql.html#version_tags"><code>CREATE GRAIN …​ VERSION …​</code></a> скрипта гранулы.
Служит для защиты от непроизвольного автоматического даунгрейда базы данных при запуске старой версии гранулы на более свежей версии базы данных.
Автообновление базы данных никогда не будет выполняться, если version tag в базе данных больше, чем version tag скрипта гранулы, либо если версии не согласованы.</p>
</dd>
<dt class="hdlist1">Контрольная сумма схемы (Grain checksum)</dt>
<dd>
<p>автоматически вычисляемая контрольная сумма скрипта гранулы.
Служит для различения CelestaSQL-скриптов по их содержанию.
Скрипты CelestaSQL, имеющие одинаковый version tag, могут преднамеренно (в процессе разработки) или непреднамеренно (из-за неаккуратности разработчика) иметь различное содержание.
База данных, автоматически сформированная по grain creation script, помимо version tag, хранит и контрольную сумму grain creation script’а, чтобы отследить момент, когда к ней установило контакт приложение с изменённым метаописанием гранулы.
Одновременное равенство version tag и grain checksum является достаточным условием для того, чтобы продолжать работу без попыток обновления структуры базы данных.  Ради лёгкости проверки и открытости алгоритма контрольная сумма состоит из двух значений: длины файла скрипта (записываемой в формате десятичного числа) и его <a href="https://en.wikipedia.org/wiki/Cyclic_redundancy_check#CRC-32_algorithm">CRC32</a> (записываемом в виде 8 шестнадцатеричных цифр).</p>
</dd>
<dt class="hdlist1">Системная гранула celesta</dt>
<dd>
<p>особая гранула, структура таблиц которой не подлежит изменению.
Таблицы этой гранулы используются системой во внутренних целях.
При этом запись и редактирование данных в части из этих таблиц является частью стандартной настройки системы.
Описание гранулы "celesta" см. в разделе <a href="1040_system_tables.html#system_tables">Системные таблицы Celesta</a>.</p>
</dd>
<dt class="hdlist1">Таблица celesta.grains</dt>
<dd>
<p>центральная системная таблица Celesta в базе данных.
Наличие данной таблицы указывает на то, что Celesta подсоединена к «своей» базе данных, в противном случае Celesta будет пытаться развернуть базу «с нуля».
Таблица содержит информацию о состоянии гранул, развёрнутых в базе.
Описание полей таблицы содержится в разделе <a href="1040_system_tables.html#celesta_grains_table">«Системные таблицы Celesta»</a>.
Информация в этой таблице активно используется во время <a href="1020_celesta_start.html#celesta_start">действий при старте</a>.</p>
</dd>
<dt class="hdlist1">Последовательность запуска гранулы (Grain startup sequence)</dt>
<dd>
<p><a href="1020_celesta_start.html#celesta_start">операции</a>, выполняемые системой Celesta для каждой гранулы при запуске.
При этом, при наличии необходимости и возможности, происходит автоматическая миграция базы данных.</p>
</dd>
<dt class="hdlist1">Автоматическая миграция базы данных</dt>
<dd>
<p>составная часть startup sequence, при которой происходит сравнение структуры существующей базы данных со структурой, заданной метаданными в Celesta при помощи скриптов создания гранул.
После сравнения разница устраняется с помощью автоматически создаваемых и исполняемых CREATE/ALTER команд.</p>
</dd>
<dt class="hdlist1">Класс доступа к данным (курсор)</dt>
<dd>
<p>автоматически кодогенерируемый на основе CelestaSQL-скрипта класс, через который можно осуществлять взаимодействие с данными таблицы, представления или последовательности.</p>
</dd>
</dl>
</div>
</article>
  </div>
</main>
</div>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script src="../../_/js/vendor/lunr.js"></script>
<script src="../../_/js/vendor/lunr-languages.js"></script>
<script src="../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../.." data-snippet-length="100" data-stylesheet="../../_/css/search.css"></script>
<script async src="../../search-index.js"></script>
  </body>
</html>
